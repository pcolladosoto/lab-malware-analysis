%include "/home/malware/asm/joey_lib_io_v6_release.asm"

global main

section .data

echo_welcome:
    db "Welcome to the character storage program", 0xA, 0x0

echo_bye:
    db "Bye!", 0xA, 0x0

chars:
    times 26 db 0x0

section .text

populate:
    lea rax, [chars]
    .loopa:
        mov [rax], rbx
        inc rbx
        inc rax
        cmp rbx, 91
        jne .loopa
    ret

display:
    .loopb:
        movzx rdi, BYTE [chars + rbx]
        call print_char_new
        call print_nl_new
        inc rbx
        cmp rbx, 26
        jne .loopb
    ret

main:
    push rbp
    mov rbp, rsp
    sub rsp, 32

    mov rdi, QWORD echo_welcome
    call print_string_new

    ; 'A' == 65
    mov rbx, 65
    call populate
    xor rbx, rbx
    call display

    mov rdi, QWORD echo_bye
    call print_string_new

    add rsp, 32
    pop rbp
    ret
